if not _G.KEY then
    game.Players.LocalPlayer:Kick("No proporcionaste una key")
    return
end

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local hwid = game:GetService("RbxAnalyticsService"):GetClientId()

local res = request({
    Url = "https://TU_API_RENDER.onrender.com/validate",
    Method = "POST",
    Headers = { ["Content-Type"] = "application/json" },
    Body = HttpService:JSONEncode({
        key = _G.KEY,
        hwid = hwid
    })
})

if not res or not res.Body then
    Players.LocalPlayer:Kick("Error de conexión")
    return
end

local data = HttpService:JSONDecode(res.Body)

if not data.valid then
    if data.reason == "EXPIRED" then
        Players.LocalPlayer:Kick("Key vencida")
    elseif data.reason == "HWID_LOCKED" then
        Players.LocalPlayer:Kick("Key en uso")
    elseif data.reason == "NOT_REDEEMED" then
        Players.LocalPlayer:Kick("Key no canjeada")
    else
        Players.LocalPlayer:Kick("Key inválida")
    end
    return
end

loadstring(game:HttpGet(data.raw))()
